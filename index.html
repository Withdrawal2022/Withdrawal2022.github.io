<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>Kiryuu&#39;s Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta property="og:type" content="website">
<meta property="og:title" content="Kiryuu&#39;s Blog">
<meta property="og:url" content="http://example.com/index.html">
<meta property="og:site_name" content="Kiryuu&#39;s Blog">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Kiryuu's Blog" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
  
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/fork-awesome@1.2.0/css/fork-awesome.min.css">

<meta name="generator" content="Hexo 7.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Kiryuu&#39;s Blog</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"><span class="fa fa-bars"></span></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
        
          <a class="nav-icon" href="/atom.xml" title="RSS Feed"><span class="fa fa-rss"></span></a>
        
        <a class="nav-icon nav-search-btn" title="Search"><span class="fa fa-search"></span></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-Survival_blog" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2025/04/13/Survival_blog/" class="article-date">
  <time class="dt-published" datetime="2025-04-13T15:59:59.000Z" itemprop="datePublished">2025-04-13</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2025/04/13/Survival_blog/">Survival Analysis on Telco Customer Churn</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h3 id="Data-Introduction"><a href="#Data-Introduction" class="headerlink" title="Data Introduction"></a>Data Introduction</h3><p>First we need to take a look at all the variables. The dataset contains 21 variables, and the description of the variables is shown below:</p>
<table>
<thead>
<tr>
<th><strong>Variable</strong></th>
<th><strong>Type</strong></th>
<th><strong>Description</strong></th>
</tr>
</thead>
<tbody><tr>
<td><code>customerID</code></td>
<td>String</td>
<td>Unique customer identifier</td>
</tr>
<tr>
<td><code>gender</code></td>
<td>String</td>
<td>Customer gender (<code>Male</code>, <code>Female</code>)</td>
</tr>
<tr>
<td><code>seniorCitizen</code></td>
<td>Double</td>
<td>Indicates if customer is a senior (1 &#x3D; Yes, 0 &#x3D; No)</td>
</tr>
<tr>
<td><code>partner</code></td>
<td>String</td>
<td>Whether the customer has a partner (<code>Yes</code>, <code>No</code>)</td>
</tr>
<tr>
<td><code>dependents</code></td>
<td>String</td>
<td>Whether the customer has dependents (<code>Yes</code>, <code>No</code>)</td>
</tr>
<tr>
<td><code>tenure</code></td>
<td>Double</td>
<td>Number of months the customer has been with the company</td>
</tr>
<tr>
<td><code>phoneService</code></td>
<td>String</td>
<td>Whether customer has phone service</td>
</tr>
<tr>
<td><code>multipleLines</code></td>
<td>String</td>
<td>Whether customer has multiple phone lines</td>
</tr>
<tr>
<td><code>internetService</code></td>
<td>String</td>
<td>Type of internet service (<code>DSL</code>, <code>Fiber optic</code>, <code>No</code>)</td>
</tr>
<tr>
<td><code>onlineSecurity</code></td>
<td>String</td>
<td>Whether customer has online security service</td>
</tr>
<tr>
<td><code>onlineBackup</code></td>
<td>String</td>
<td>Whether customer has online backup service</td>
</tr>
<tr>
<td><code>deviceProtection</code></td>
<td>String</td>
<td>Whether customer has device protection</td>
</tr>
<tr>
<td><code>techSupport</code></td>
<td>String</td>
<td>Whether customer has tech support service</td>
</tr>
<tr>
<td><code>streamingTV</code></td>
<td>String</td>
<td>Whether customer streams TV</td>
</tr>
<tr>
<td><code>streamingMovies</code></td>
<td>String</td>
<td>Whether customer streams movies</td>
</tr>
<tr>
<td><code>contract</code></td>
<td>String</td>
<td>Contract type (<code>Month-to-month</code>, <code>One year</code>, <code>Two year</code>)</td>
</tr>
<tr>
<td><code>paperlessBilling</code></td>
<td>String</td>
<td>Whether customer uses paperless billing</td>
</tr>
<tr>
<td><code>paymentMethod</code></td>
<td>String</td>
<td>Payment method used by the customer</td>
</tr>
<tr>
<td><code>monthlyCharges</code></td>
<td>Double</td>
<td>Monthly billing amount</td>
</tr>
<tr>
<td><code>totalCharges</code></td>
<td>Double</td>
<td>Total amount charged to the customer</td>
</tr>
<tr>
<td><code>churn</code></td>
<td>Double</td>
<td>Whether the customer has churned (1 &#x3D; Yes, 0 &#x3D; No)</td>
</tr>
</tbody></table>
<p>Here <code>churn</code> means the customer has churned, which is the target variable we need to predict. And variable <code>tenure</code> means the number of months the customer has been with the company, which is the time variable we need to use in the survival analysis. Most of other variables are categorical variables, which facilitate the use of models like cox model.</p>
<hr>
<h3 id="Step-1-Data-Loading-and-Preprocessing"><a href="#Step-1-Data-Loading-and-Preprocessing" class="headerlink" title="Step 1: Data Loading and Preprocessing"></a>Step 1: Data Loading and Preprocessing</h3><p><strong>Method</strong>:<br>The dataset was loaded using Spark. Schema was defined for all columns. The target population includes customers with “Month-to-month” contracts and active internet service.</p>
<p><strong>Processing</strong>:</p>
<ul>
<li><code>churnString</code> was binarized into a numeric <code>churn</code> column.</li>
<li>Only “Month-to-month” internet users were selected to focus on high churn-risk users.</li>
<li>Only users with <code>internetService</code> not equal to “No” were retained.</li>
</ul>
<p><strong>Result</strong>:<br>The first 5 rows of the dataset is shown below:<br><img src="/image-2.png" alt="alt text"></p>
<hr>
<h3 id="Step-2-Kaplan-Meier-Estimation"><a href="#Step-2-Kaplan-Meier-Estimation" class="headerlink" title="Step 2: Kaplan-Meier Estimation"></a>Step 2: Kaplan-Meier Estimation</h3><p><strong>Method</strong>:<br>A Kaplan-Meier estimator was used to measure the probability of customer retention over time.</p>
<p><strong>Variables</strong>:</p>
<ul>
<li><strong>T</strong>: <code>tenure</code> (duration until event or censoring)</li>
<li><strong>C</strong>: <code>churn</code> (1 if churned, 0 if censored)</li>
</ul>
<p><strong>Result</strong>:<br>The KM survival curve is shown below:<br><img src="/image-3.png" alt="alt text"></p>
<p>Stratified KM curves were plotted for each categorical variable, the survival curves are shown below:<br><img src="/image-4.png" alt="alt text"></p>
<p><strong>Log-Rank Tests</strong>:</p>
<ul>
<li>Statistically significant differences in survival curves were found for multiple covariates, including <ul>
<li><code>onlineSecurity</code> (p-value: $3.14\times{10}^{-18}$)</li>
<li><code>seniorCitizen</code> (p-value: $2.52\times{10}^{-12}$)</li>
<li><code>partner</code> (p-value: $5.06\times{10}^{-58}$)</li>
<li><code>dependents</code> (p-value: $2.51\times{10}^{-4}$)</li>
<li><code>internetService</code> (p-value: $2.37\times{10}^{-32}$)</li>
<li><code>streamingTV</code> (p-value: $1.81\times{10}^{-32}$)</li>
<li><code>streamingMovies</code> (p-value: $6.48\times{10}^{-39}$)</li>
<li><code>onlineBackup</code> (p-value: $2.62\times{10}^{-67}$)</li>
<li><code>deviceProtection</code> (p-value: $7.90\times{10}^{-39}$)</li>
<li><code>techSupport</code> (p-value: $3.46\times{10}^{-7}$)</li>
<li><code>paperlessBilling</code> (p-value: $5.00\times{10}^{-7}$)</li>
<li><code>paymentMethod</code></li>
</ul>
</li>
</ul>
<p><strong>Findings</strong>:</p>
<ul>
<li>The median survival time was estimated at approximately 34 months.</li>
<li>The survival curve showed a steep early decline, indicating significant churn within the first year.</li>
<li>According to Stratified KM curves and Log-Rank tests, the following features were found to be significant in affecting customer retention:<ul>
<li><code>onlineSecurity</code>: Customers with online security had a higher survival probability.</li>
<li><code>partner</code>: Customers with partners had a higher survival probability.</li>
<li><code>dependents</code>: Customers with dependents had a higher survival probability.</li>
<li><code>internetService</code>: Fiber-optic users had a higher survival probability compared to DSL users.</li>
<li><code>onlineBackup</code>: Customers with online backup services had a higher survival probability.</li>
<li><code>deviceProtection</code>: Customers with device protection had a higher survival probability.</li>
<li><code>techSupport</code>: Customers with tech support had a higher survival probability.</li>
</ul>
</li>
</ul>
<hr>
<h3 id="Step-3-Cox-Proportional-Hazards-PH-Model"><a href="#Step-3-Cox-Proportional-Hazards-PH-Model" class="headerlink" title="Step 3: Cox Proportional Hazards (PH) Model"></a>Step 3: Cox Proportional Hazards (PH) Model</h3><p><strong>Method</strong>:<br>The Cox PH model was fitted to evaluate the hazard ratio associated with multiple covariates without assuming a parametric form for the baseline hazard.</p>
<p><strong>Covariates</strong>:<br>One-hot encoding was applied to:</p>
<ul>
<li><code>dependents</code></li>
<li><code>internetService</code> </li>
<li><code>onlineBackup</code></li>
<li><code>techSupport</code></li>
<li><code>paperlessBilling</code></li>
</ul>
<p><strong>Model Summary Raw Result</strong>:<br><img src="/image-6.png" alt="alt text"></p>
<p><img src="/image-5.png" alt="alt text"></p>
<p><strong>Model Summary</strong>:</p>
<table>
<thead>
<tr>
<th>Variable</th>
<th>Hazard Ratio</th>
<th>p-value</th>
<th>Interpretation</th>
</tr>
</thead>
<tbody><tr>
<td><code>dependents_Yes</code></td>
<td>0.72 &lt; 1</td>
<td>&lt; 0.005</td>
<td>Associated with reduced risk of churn</td>
</tr>
<tr>
<td><code>internetService_DSL</code></td>
<td>0.80 &lt; 1</td>
<td>&lt; 0.005</td>
<td>Lower churn hazard compared to fiber users</td>
</tr>
<tr>
<td><code>onlineBackup_Yes</code></td>
<td>0.46 &lt; 1</td>
<td>&lt; 0.005</td>
<td>Reduced churn hazard</td>
</tr>
<tr>
<td><code>techSupport_Yes</code></td>
<td>0.53 &lt; 1</td>
<td>&lt; 0.005</td>
<td>Associated with reduced risk of churn</td>
</tr>
</tbody></table>
<p><strong>PH Assumption Checks</strong>:</p>
<ul>
<li>Scaled Schoenfeld residuals were plotted against time to check for proportional hazards assumption.</li>
</ul>
<p><img src="/image-8.png" alt="alt text"><br><img src="/image-9.png" alt="alt text"><br><img src="/image-10.png" alt="alt text"><br><img src="/image-11.png" alt="alt text"></p>
<p>According to the Schoenfeld residuals, only the plot of the variable <code>dependents</code> is horizontal, which means the variable <code>dependents</code> is proportional. </p>
<ul>
<li><p>Statistical Test Result<br><img src="/image-7.png" alt="alt text"></p>
<p>  The result is the same as using Schoenfeld residuals, which means the variable <code>dependents</code> is proportional.</p>
</li>
<li><p>log-log plots<br><img src="/image-12.png" alt="alt text"></p>
<p>   According to the log-log plots, the plots of the variable <code>dependents</code> and <code>techSupport</code> are nearly parallel, which means the variable <code>dependents</code> and <code>techSupport</code> are proportional.</p>
</li>
</ul>
<hr>
<h3 id="Step-4-Accelerated-Failure-Time-AFT-Model"><a href="#Step-4-Accelerated-Failure-Time-AFT-Model" class="headerlink" title="Step 4: Accelerated Failure Time (AFT) Model"></a>Step 4: Accelerated Failure Time (AFT) Model</h3><p><strong>Method</strong>:<br>A log-logistic AFT model was fitted to directly model survival time as a function of covariates.</p>
<p><strong>Variables</strong>:<br>One-hot encoding was applied to:</p>
<ul>
<li><code>partner</code></li>
<li><code>multipleLines</code></li>
<li><code>internetService</code></li>
<li><code>onlineSecurity</code></li>
<li><code>onlineBackup</code></li>
<li><code>deviceProtection</code></li>
<li><code>techSupport</code></li>
<li><code>paymentMethod</code></li>
</ul>
<p><strong>Model Summary Raw Result</strong>:<br><img src="/image-13.png" alt="alt text"><br><img src="/image-14.png" alt="alt text"></p>
<p><strong>Model Summary</strong>:</p>
<table>
<thead>
<tr>
<th>Variable</th>
<th>accelerated faliure rate</th>
<th>p-value</th>
<th>Interpretation</th>
</tr>
</thead>
<tbody><tr>
<td><code>deviceProtection_Yes</code></td>
<td>0.48 &lt; 1</td>
<td>&lt; 0.005</td>
<td>Associated with reduced time of churn</td>
</tr>
<tr>
<td><code>internetService_DSL</code></td>
<td>0.38 &lt; 1</td>
<td>&lt; 0.005</td>
<td>Lower churn time compared to fiber users</td>
</tr>
<tr>
<td><code>multipleLines_Yes</code></td>
<td>0.66 &lt; 1</td>
<td>&lt; 0.005</td>
<td>Lower churn time compared to fiber users</td>
</tr>
<tr>
<td><code>onlineBackup_Yes</code></td>
<td>0.81 &lt; 1</td>
<td>&lt; 0.005</td>
<td>Reduced churn hazard</td>
</tr>
<tr>
<td><code>onlineSecurity_Yes</code></td>
<td>0.86 &lt; 1</td>
<td>&lt; 0.005</td>
<td>Reduced churn hazard</td>
</tr>
<tr>
<td><code>partner_Yes</code></td>
<td>0.68 &lt; 1</td>
<td>&lt; 0.005</td>
<td>Associated with reduced time of churn</td>
</tr>
<tr>
<td><code>paymentMethod_Bank transfer (automatic)</code></td>
<td>0.74 &lt; 1</td>
<td>&lt; 0.005</td>
<td>Associated with reduced time of churn</td>
</tr>
<tr>
<td><code>paymentMethod_Credit card (automatic)</code></td>
<td>0.80 &lt; 1</td>
<td>&lt; 0.005</td>
<td>Associated with reduced time of churn</td>
</tr>
<tr>
<td><code>techSupport_Yes</code></td>
<td>0.69 &lt; 1</td>
<td>&lt; 0.005</td>
<td>Associated with reduced time of churn</td>
</tr>
</tbody></table>
<p><strong>Assumptions Checks</strong>:<br><img src="/image-15.png" alt="alt text"></p>
<ul>
<li>First we check the <code>Proportional Odds</code> asumption. None of the plot is parallel, which means the <code>Proportional Odds</code> assumption is not satisfied.</li>
<li>Then we check the <code>Log-Logistic Distribution</code> assumption. Variables like <code>partner</code>, <code>onlineSecurity</code> and <code>deviceProtection</code> satisfied the assumption becuase their plots are linear.</li>
</ul>
<hr>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2025/04/13/Survival_blog/" data-id="cm9fuq9hh000038u0bhig4930" data-title="Survival Analysis on Telco Customer Churn" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-hello-world" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2025/04/11/hello-world/" class="article-date">
  <time class="dt-published" datetime="2025-04-11T13:00:52.412Z" itemprop="datePublished">2025-04-11</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2025/04/11/hello-world/">Hello World</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>Welcome to <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a target="_blank" rel="noopener" href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a target="_blank" rel="noopener" href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a target="_blank" rel="noopener" href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/writing.html">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/server.html">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/generating.html">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2025/04/11/hello-world/" data-id="cm9fuq9hy000138u0ea6v1i4m" data-title="Hello World" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  


</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2025/04/">April 2025</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2025/04/13/Survival_blog/">Survival Analysis on Telco Customer Churn</a>
          </li>
        
          <li>
            <a href="/2025/04/11/hello-world/">Hello World</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2025 John Doe<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.6.4.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>